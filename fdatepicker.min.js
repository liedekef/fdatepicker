((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).FDatepicker=e()})(this,function(){let d={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",close:"Close",format:"m/d/Y h:i a",firstDayOfWeek:0,noDatesSelected:"No dates selected",datesSelected:"Selected dates ({0}):"};class h{static setMessages(t){Object.assign(d,t)}constructor(t,e={}){if(this.input="string"==typeof t?document.querySelector(t):t,this.input){if(this.input._fdatepicker)return this.input._fdatepicker;(this.input._fdatepicker=this).container=this.getOrCreateGlobalContainer(),this.focusedDate=new Date,this.selectedDate=null,this.selectedEndDate=null,this.selectedDates=[],this.isOpen=!1,this.currentYear=(new Date).getFullYear(),this.focusedElement=null,this.options={format:this.input.dataset.format||"",view:this.input.dataset.view||"days",minDate:this.input.dataset.minDate?new Date(this.input.dataset.minDate):null,maxDate:this.input.dataset.maxDate?new Date(this.input.dataset.maxDate):null,disabledDates:this.input.dataset.disabledDates?this.input.dataset.disabledDates.split(",").map(t=>t.trim()):[],altField:this.input.dataset.altField||null,altFormat:this.input.dataset.altFormat||"Y-m-d",range:"true"===this.input.dataset.range,multiple:"true"===this.input.dataset.multiple,multipleSeparator:this.input.dataset.multipleSeparator||",",altFieldMultipleSeparator:this.input.dataset.altFieldMultipleSeparator||",",multipleDisplaySelector:this.input.dataset.multipleDisplaySelector||".selected-dates-display",autoClose:"false"!==this.input.dataset.autoClose,firstDayOfWeek:parseInt(this.input.dataset.firstDayOfWeek)||0,todayButton:"false"!==this.input.dataset.todayButton,clearButton:"false"!==this.input.dataset.clearButton,closeButton:"false"!==this.input.dataset.closeButton,timepicker:"true"===this.input.dataset.timepicker,timeOnly:"true"===this.input.dataset.timeOnly,timepickerDefaultNow:"false"!==this.input.dataset.timepickerDefaultNow,ampm:"false"===this.input.dataset.ampm,hoursStep:parseInt(this.input.dataset.hoursStep)||1,minutesStep:parseInt(this.input.dataset.minutesStep)||1,minHours:void 0!==this.input.dataset.minHours?parseInt(this.input.dataset.minHours):null,maxHours:void 0!==this.input.dataset.maxHours?parseInt(this.input.dataset.maxHours):null,minMinutes:void 0!==this.input.dataset.minMinutes?parseInt(this.input.dataset.minMinutes):0,maxMinutes:void 0!==this.input.dataset.maxMinutes?parseInt(this.input.dataset.maxMinutes):59,onSelect:"function"==typeof this.input.dataset.onSelect?this.input.dataset.onSelect:null,...e},this.view="years"===this.options.view?"years":"months"===this.options.view?"months":"days",this.locale=d,this.options.timeOnly&&(this.options.autoClose=!1,this.options.todayButton=!1,this.options.clearButton=!1),this.input.dataset.format||this.options.format||(this.options.format=this.locale.format||"m/d/Y"),(this.options.format.includes("a")||this.options.format.includes("A"))&&(this.options.ampm=!0),this.popup=this.createPopup(),this.title=this.popup.querySelector(".fdatepicker-title"),this.content=this.popup.querySelector(".fdatepicker-content"),this.grid=this.popup.querySelector(".fdatepicker-grid"),this.hoursInput=this.popup.querySelector('[data-time="hours"]'),this.minutesInput=this.popup.querySelector('[data-time="minutes"]'),this.init()}}isDateDisabled(t){var e=t.getTime(),t=this.formatDate(t,"Y-m-d");return!!(this.options.minDate&&e<this.options.minDate.setHours(0,0,0,0))||!!(this.options.maxDate&&e>this.options.maxDate.setHours(23,59,59,999))||!!this.options.disabledDates.includes(t)}getOrCreateGlobalContainer(){let t=document.getElementById("fdatepicker-global-container");return t||((t=document.createElement("div")).id="fdatepicker-global-container",t.className="fdatepicker-global-container",document.body.appendChild(t)),t}wrapInput(){var t=document.createElement("div");return t.style.position="relative",t.style.display="inline-block",t.style.width="100%",this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t}init(){this.initializePrefilledDates(),this.render(),this.bindEvents(),this.bindKeyboard(),this.updateInput()}initializePrefilledDates(){var t;this.options.multiple&&this.input.dataset.dates?(t=this.input.dataset.dates.split(","),this.selectedDates=t.map(t=>new Date(t.trim())).filter(t=>!isNaN(t)),0<this.selectedDates.length&&(this.focusedDate=new Date(this.selectedDates[0]))):this.input.dataset.date&&(t=new Date(this.input.dataset.date),isNaN(t)||(this.selectedDate=t,this.focusedDate=new Date(t)))}getInitialTimeValues(){let t=12,e=0,s=!0;var i;this.selectedDate?(t=this.selectedDate.getHours(),e=this.selectedDate.getMinutes(),s=t<12):this.options.timepickerDefaultNow&&(i=new Date,t=i.getHours(),e=i.getMinutes(),s=t<12);let a=t;return{hours:a=this.options.ampm?0===t?12:12<t?t-12:t:a,minutes:e,isAM:s}}createPopup(){var s=document.createElement("div");if(s.className="fdatepicker-popup",this.options.timeOnly||(s.innerHTML=`
        <div class="fdatepicker-header">
            <button class="fdatepicker-nav" data-action="prev" tabindex="0">‹</button>
            <div class="fdatepicker-title" tabindex="0"></div>
            <button class="fdatepicker-nav" data-action="next" tabindex="0">›</button>
        </div>
        <div class="fdatepicker-content">
            <div class="fdatepicker-grid">
                <!-- Days headers will be added dynamically -->
            </div>
        </div>
        `),this.options.timepicker){var i=this.getInitialTimeValues(),a=!this.options.ampm;let t,e;e=null!==this.options.minHours&&null!==this.options.maxHours?(t=this.options.minHours,this.options.maxHours):a?(t=null!==this.options.minHours?this.options.minHours:0,null!==this.options.maxHours?this.options.maxHours:23):(t=null!==this.options.minHours?this.options.minHours:1,null!==this.options.maxHours?this.options.maxHours:12);var a=document.createElement("div"),n=(a.className="fdatepicker-time-inputs",document.createElement("input")),n=(n.type="number",n.className="fdatepicker-time-input",n.dataset.time="hours",n.min=t,n.max=e,n.step=this.options.hoursStep,n.value=String(i.hours).padStart(2,"0"),n.tabIndex=0,a.appendChild(n),document.createElement("span")),n=(n.className="fdatepicker-time-separator",n.textContent=":",a.appendChild(n),document.createElement("input"));if(n.type="number",n.className="fdatepicker-time-input",n.dataset.time="minutes",n.min=this.options.minMinutes,n.max=this.options.maxMinutes,n.step=this.options.minutesStep,n.value=String(i.minutes).padStart(2,"0"),n.tabIndex=0,a.appendChild(n),this.options.ampm){let e=document.createElement("div"),s=(e.className="fdatepicker-time-ampm "+(i.isAM?"active":""),e.dataset.ampm="AM",e.textContent="AM",e.tabIndex=0,e.addEventListener("click",()=>{e.classList.add("active"),s.classList.remove("active"),this.updateSelectedTime()}),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())}),a.appendChild(e),document.createElement("div"));s.className="fdatepicker-time-ampm "+(i.isAM?"":"active"),s.dataset.ampm="PM",s.textContent="PM",s.tabIndex=0,s.addEventListener("click",()=>{s.classList.add("active"),e.classList.remove("active"),this.updateSelectedTime()}),s.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),s.click())}),a.appendChild(s)}n=document.createElement("div");n.className="fdatepicker-timepicker",n.appendChild(a),s.appendChild(n)}return(this.options.todayButton||this.options.clearButton||this.options.closeButton)&&((i=document.createElement("div")).className="fdatepicker-buttons",this.options.todayButton&&((a=document.createElement("button")).type="button",a.className="fdatepicker-button-text",a.textContent=this.locale.today||"Today",a.addEventListener("click",t=>{t.stopPropagation();t=new Date;this.selectDate(t.getDate()),this.focusedDate=new Date(t),this.render()}),i.appendChild(a)),this.options.clearButton&&((n=document.createElement("button")).type="button",n.className="fdatepicker-button-text",n.textContent=this.locale.clear||"Clear",n.addEventListener("click",t=>{t.stopPropagation(),this.selectedDate=null,this.selectedEndDate=null,this.selectedDates=[],this.updateInput(),this.render()}),i.appendChild(n)),this.options.closeButton&&((a=document.createElement("button")).type="button",a.className="fdatepicker-button-text",a.textContent=this.locale.close||"Close",a.addEventListener("click",t=>{t.stopPropagation(),this.close()}),i.appendChild(a)),s.appendChild(i)),this.container.appendChild(s),s}bindKeyboard(){this.input.addEventListener("keydown",t=>{if(this.isOpen||"Escape"===t.key)switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageUp","PageDown","Home","End"," "].includes(t.key)&&(t.preventDefault(),t.stopPropagation()),t.key){case"Escape":t.preventDefault(),t.stopPropagation(),this.close(),this.input.focus();break;case"Tab":this.popup.contains(t.target)||this.close();break;case"ArrowLeft":this.navigate(-1,"horizontal");break;case"ArrowRight":this.navigate(1,"horizontal");break;case"ArrowUp":this.navigate(-1,"vertical");break;case"ArrowDown":this.navigate(1,"vertical");break;case"PageUp":"days"===this.view&&(t.shiftKey?this.focusedDate.setFullYear(this.focusedDate.getFullYear()-1):this.focusedDate.setMonth(this.focusedDate.getMonth()-1),this.render(),this.setInitialFocus());break;case"PageDown":"days"===this.view&&(t.shiftKey?this.focusedDate.setFullYear(this.focusedDate.getFullYear()+1):this.focusedDate.setMonth(this.focusedDate.getMonth()+1),this.render(),this.setInitialFocus());break;case"Home":"days"===this.view&&(this.focusedDate.setDate(1),this.render(),this.focusCurrentDay());break;case"End":var e;"days"===this.view&&(e=new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth()+1,0).getDate(),this.focusedDate.setDate(e),this.render(),this.focusCurrentDay());break;case"Enter":case" ":this.handleSelection()}else["ArrowDown"," ","Enter"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),this.open())}),this.grid?.addEventListener("keydown",t=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageUp","PageDown","Home","End"," ","Enter","Escape"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),t=new KeyboardEvent("keydown",{key:t.key,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey,bubbles:!1,cancelable:!0}),this.input.dispatchEvent(t))}),this.boundDocumentKeydownHandler=t=>{this.isOpen&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageUp","PageDown","Home","End"," "].includes(t.key)&&(this.grid!==t.target&&!this.popup.contains(t.target)||(t.preventDefault(),t.stopPropagation()))},document.addEventListener("keydown",this.boundDocumentKeydownHandler)}navigate(e,s){if("days"===this.view)"horizontal"===s?this.focusedDate.setDate(this.focusedDate.getDate()+e):this.focusedDate.setDate(this.focusedDate.getDate()+7*e),this.render(),this.focusCurrentDay();else if("months"===this.view){var i=this.focusedDate.getMonth();let t;(t="horizontal"===s?i+e:i+3*e)<0?(this.focusedDate.setFullYear(this.focusedDate.getFullYear()-1),this.focusedDate.setMonth(11+t+1)):11<t?(this.focusedDate.setFullYear(this.focusedDate.getFullYear()+1),this.focusedDate.setMonth(t-12)):this.focusedDate.setMonth(t),this.render(),this.focusCurrentMonth()}else"years"===this.view&&(this.currentYear+="horizontal"===s?e:3*e,this.render(),this.focusCurrentYear())}handleSelection(){var t;"days"===this.view?!(t=this.popup.querySelector(".fdatepicker-day:focus, .fdatepicker-day.focus"))||t.classList.contains("other-month")||t.classList.contains("disabled")||this.selectDate(parseInt(t.textContent)):"months"===this.view?(t=this.popup.querySelector(".fdatepicker-month:focus, .fdatepicker-month.focus"))&&this.selectMonth(parseInt(t.dataset.month)):"years"===this.view&&(t=this.popup.querySelector(".fdatepicker-year:focus, .fdatepicker-year.focus"))&&this.selectYear(parseInt(t.dataset.year))}setInitialFocus(){setTimeout(()=>{this.options.timeOnly?this.hoursInput?this.hoursInput.focus():this.minutesInput&&this.minutesInput.focus():"days"===this.view?this.focusCurrentDay():"months"===this.view?this.focusCurrentMonth():"years"===this.view&&this.focusCurrentYear()},0)}focusCurrentDay(){if("days"===this.view){this.clearFocus();this.focusedDate.getFullYear(),this.focusedDate.getMonth();let e=this.focusedDate.getDate();var t=Array.from(this.popup.querySelectorAll(".fdatepicker-day:not(.other-month)")).find(t=>parseInt(t.textContent)===e);t&&this.setFocus(t)}}focusCurrentMonth(){var t;"months"===this.view&&(this.clearFocus(),t=this.focusedDate.getMonth(),t=this.popup.querySelector(`[data-month="${t}"]`))&&this.setFocus(t)}focusCurrentYear(){var t;"years"===this.view&&(this.clearFocus(),t=this.focusedDate.getFullYear(),t=this.popup.querySelector(`[data-year="${t}"]`))&&this.setFocus(t)}setFocus(t){if(this.focusedElement&&(this.focusedElement.setAttribute("tabindex","-1"),this.focusedElement.classList.remove("focus")),(this.focusedElement=t).setAttribute("tabindex","0"),t.classList.add("focus"),t.focus(),this.options.range&&this.selectedDate&&!this.selectedEndDate){this.popup.querySelectorAll(".fdatepicker-day.in-range").forEach(t=>{t.classList.remove("in-range")});var e=parseInt(t.textContent);let a=this.focusedDate.getMonth(),n=this.focusedDate.getFullYear();e=new Date(n,a,e);if(!(isNaN(e.getTime())||t.classList.contains("other-month")||t.classList.contains("disabled"))){t=this.selectedDate;let s=t<e?t:e,i=t<e?e:t;Array.from(this.popup.querySelectorAll(".fdatepicker-day:not(.other-month)")).forEach(t=>{var e=parseInt(t.textContent),e=new Date(n,a,e);e>s&&e<i&&t.classList.add("in-range")})}}}clearFocus(){this.popup.querySelectorAll(".fdatepicker-day, .fdatepicker-month, .fdatepicker-year").forEach(t=>{t.classList.remove("focus"),t.classList.remove("hover"),t.setAttribute("tabindex","-1")}),this.focusedElement=null}bindEvents(){this.input.addEventListener("click",()=>this.toggle()),this.grid?.addEventListener("mouseover",t=>{t.target.classList.contains("fdatepicker-day")?t.target.classList.contains("other-month")?t.target.classList.add("hover"):this.setFocus(t.target):(t.target.classList.contains("fdatepicker-month")||t.target.classList.contains("fdatepicker-year"))&&this.setFocus(t.target)}),this.grid?.addEventListener("mouseleave",()=>{this.clearFocus()}),this.popup.addEventListener("click",t=>{t.stopPropagation();var e=t.target.dataset.action;"prev"===e&&(this.navigateView(-1),this.setInitialFocus()),"next"===e&&(this.navigateView(1),this.setInitialFocus()),t.target===this.title&&("days"===this.view?this.view="months":"months"===this.view&&(this.view="years"),this.render(),this.setInitialFocus()),t.target.classList.contains("fdatepicker-day")&&!t.target.classList.contains("other-month")&&this.selectDate(parseInt(t.target.textContent)),t.target.classList.contains("fdatepicker-month")&&this.selectMonth(parseInt(t.target.dataset.month)),t.target.classList.contains("fdatepicker-year")&&this.selectYear(parseInt(t.target.dataset.year))}),this.options.timepicker&&[this.hoursInput,this.minutesInput].forEach(t=>{t&&(t.addEventListener("keydown",t=>{["Enter","Escape"].includes(t.key)?(t.preventDefault(),t.stopPropagation(),this.close(),this.input.focus()):["ArrowUp","ArrowDown"].includes(t.key)&&t.stopPropagation()}),t.addEventListener("change",()=>this.updateSelectedTime()),t.addEventListener("blur",t=>{var e=t.target.dataset.time,s=parseInt(t.target.value)||0,e=this.validateTimeInput(e,s);t.target.value=String(e).padStart(2,"0")}),t.addEventListener("input",t=>{var e=t.target.dataset.time,s=parseInt(t.target.value);isNaN(s)||(e=this.validateTimeInput(e,s))!==s&&(t.target.value=String(e).padStart(2,"0"))}))}),this.boundDocumentClickHandler=t=>{t.target===this.input||this.popup.contains(t.target)||this.close()},document.addEventListener("click",this.boundDocumentClickHandler)}navigateView(t){"days"===this.view?this.focusedDate.setMonth(this.focusedDate.getMonth()+t):"months"===this.view?this.focusedDate.setFullYear(this.focusedDate.getFullYear()+t):"years"===this.view&&(this.currentYear+=12*t),this.render()}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen||(this.isOpen=!0,this.render(),this.popup.classList.add("active"),this.setInitialFocus(),this.setPosition())}setPosition(){var t=this.input.getBoundingClientRect(),e=this.input.getBoundingClientRect(),s=t.top+window.scrollY,t=t.left+window.scrollX,i=window.innerHeight-e.bottom,a=e.top;let n,o;this.popup.classList.remove("fdatepicker-popup-top","fdatepicker-popup-bottom","fdatepicker-popup-middle"),n=i<a&&300<a?(this.popup.classList.add("fdatepicker-popup-top"),s-4):i<a&&150<a||i<150?(this.popup.classList.add("fdatepicker-popup-middle"),s-4):(this.popup.classList.add("fdatepicker-popup-bottom"),s+e.height+4);(o=(o=t)<10?10:o)>window.innerWidth-320&&(o=window.innerWidth-320),n<10&&(n=10),this.popup.style.top=n+"px",this.popup.style.left=o+"px"}close(){this.isOpen=!1,this.popup.classList.remove("active"),this.clearFocus()}destroy(){var t;this.close(),this.popup&&this.popup.parentNode&&this.popup.parentNode.removeChild(this.popup),this.cleanupGlobalContainer(),this.boundDocumentClickHandler&&document.removeEventListener("click",this.boundDocumentClickHandler),this.boundDocumentKeydownHandler&&document.removeEventListener("keydown",this.boundDocumentKeydownHandler),this.input&&this.input.parentNode&&(t=this.input.cloneNode(!0),this.input.parentNode.replaceChild(t,this.input),delete t._fdatepicker),this.input=null,this.popup=null,this.container=null,this.title=null,this.content=null,this.grid=null,this.hoursInput=null,this.minutesInput=null,this.focusedElement=null,this.selectedDate=null,this.selectedEndDate=null,this.selectedDates=[],this.options=null,this.locale=null,this.boundDocumentClickHandler=null,this.boundDocumentKeydownHandler=null}static destroyAll(){document.querySelectorAll("input[data-fdatepicker]").forEach(t=>{t._fdatepicker&&(t._fdatepicker.destroy(),delete t._fdatepicker)})}cleanupGlobalContainer(){var t=document.getElementById("fdatepicker-global-container");t&&0===t.children.length&&t.parentNode.removeChild(t)}triggerOnSelect(){if("function"==typeof this.options.onSelect){let t=null,e="";e=this.options.multiple?(t=this.selectedDates,this.selectedDates.map(t=>this.formatDate(t,this.options.dateFormat)).join(this.options.multipleDatesSeparator)):this.options.range?(t=[this.selectedDate,this.selectedEndDate].filter(Boolean)).map(t=>this.formatDate(t,this.options.dateFormat)).join(" - "):(t=this.selectedDate,this.selectedDate?this.formatDate(this.selectedDate,this.options.dateFormat):""),this.options.onSelect.call(this.input,e,t,this)}}setDate(t){t?this.options.multiple?(Array.isArray(t)?this.selectedDates=t.map(t=>t instanceof Date?t:new Date(t)):this.selectedDates=[t instanceof Date?t:new Date(t)],this.selectedDate=null,this.selectedEndDate=null):this.options.range?Array.isArray(t)&&2<=t.length?(this.selectedDate=t[0]instanceof Date?t[0]:new Date(t[0]),this.selectedEndDate=t[1]instanceof Date?t[1]:new Date(t[1])):(this.selectedDate=t instanceof Date?t:new Date(t),this.selectedEndDate=null):(this.selectedDate=t instanceof Date?t:new Date(t),this.selectedEndDate=null,this.selectedDates=[]):(this.selectedDate=null,this.selectedEndDate=null,this.selectedDates=[]),this.selectedDate&&isNaN(this.selectedDate.getTime())&&(this.selectedDate=null),this.selectedEndDate&&isNaN(this.selectedEndDate.getTime())&&(this.selectedEndDate=null),this.selectedDates&&(this.selectedDates=this.selectedDates.filter(t=>t&&!isNaN(t.getTime()))),this.updateInput(),this.render(),this.focusCurrentDay(),this.options.autoClose&&!this.options.timepicker&&this.close(),this.triggerOnSelect()}selectDate(i){if(this.options.timeOnly)this.updateSelectedTime();else{var a,n=this.focusedDate.getFullYear(),o=this.focusedDate.getMonth();let t=0,e=0,s=(this.selectedDate?(t=this.selectedDate.getHours(),e=this.selectedDate.getMinutes()):this.options.timepicker&&(t=parseInt(this.hoursInput?.value)||0,e=parseInt(this.minutesInput?.value)||0,this.options.ampm)&&(!(a="AM"===this.popup.querySelector("[data-ampm].active")?.dataset.ampm)&&t<12?t+=12:a&&12===t&&(t=0)),new Date(n,o,i,t,e));this.isDateDisabled(s)||(this.options.multiple?(0<=(a=this.selectedDates.findIndex(t=>t.toDateString()===s.toDateString()))?this.selectedDates.splice(a,1):(this.selectedDates.push(s),this.selectedDates.sort((t,e)=>t-e)),this.updateInput(),this.render(),this.updateMultipleDisplay(),this.focusCurrentDay()):this.options.range?!this.selectedDate||this.selectedEndDate?(this.selectedDate=s,this.selectedEndDate=null,this.render(),this.focusCurrentDay()):(s<this.selectedDate?(this.selectedEndDate=this.selectedDate,this.selectedDate=s):this.selectedEndDate=s,this.updateInput(),this.options.timepicker?(this.render(),this.focusCurrentDay()):this.options.autoClose&&this.close()):(this.selectedDate&&this.selectedDate.toDateString()===s.toDateString()?this.selectedDate=null:this.selectedDate=s,this.updateInput(),this.options.timepicker?(this.render(),this.focusCurrentDay()):this.options.autoClose&&this.close()),this.triggerOnSelect())}}selectMonth(t){this.focusedDate.setMonth(t),this.view="days",this.render(),this.setInitialFocus()}selectYear(t){this.focusedDate.setFullYear(t),this.currentYear=t,this.view="months",this.render(),this.setInitialFocus()}validateTimeInput(t,s){if("hours"===t){var i=!this.options.ampm;let t=i?0:1,e=i?23:12;if(null!==this.options.minHours&&(t=this.options.minHours),null!==this.options.maxHours&&(e=this.options.maxHours),s<t)return t;if(s>e)return e;i=(s-t)%this.options.hoursStep;if(0!=i)return s-i}else if("minutes"===t){if(s<this.options.minMinutes)return this.options.minMinutes;if(s>this.options.maxMinutes)return this.options.maxMinutes;i=(s-this.options.minMinutes)%this.options.minutesStep;if(0!=i)return s-i}return s}updateSelectedTime(){var e=this.options.multiple?this.selectedDates[this.selectedDates.length-1]:this.selectedEndDate||this.selectedDate||null;if(e){let t=parseInt(this.hoursInput?.value)||0;var s,i=parseInt(this.minutesInput?.value)||0;t=this.validateTimeInput("hours",t),i=this.validateTimeInput("minutes",i),this.hoursInput&&(this.hoursInput.value=String(t).padStart(2,"0")),this.minutesInput&&(this.minutesInput.value=String(i).padStart(2,"0")),this.options.ampm&&((s="AM"===this.popup.querySelector("[data-ampm].active")?.dataset.ampm)&&12===t?t=0:s||12===t||(t+=12)),e.setHours(t,i),this.updateInput()}}updateMultipleDisplay(){var t,e,s=document.querySelector(this.options.multipleDisplaySelector);s&&this.options.multiple&&(0===this.selectedDates.length?s.textContent=this.locale.noDatesSelected||"No dates selected":(t=this.selectedDates.map(t=>this.formatDate(t)),e=this.locale.datesSelected||"Selected dates ({0}):",s.innerHTML="<strong>"+e.replace(/\{0\}/g,this.selectedDates.length)+"</strong><br>"+t.join(", ")))}formatDate(t,e=null){return t?(e=e||this.options.format,h.formatDate(t,e,this.locale)):""}static formatDate(t,e="m/d/Y",s=null){if(!t)return"";var s=s||d,i=t.getHours(),a=t.getMinutes(),n=t.getSeconds(),o=12<=i,r=i%12==0?12:i%12;let l={d:String(t.getDate()).padStart(2,"0"),j:t.getDate(),l:s.days[t.getDay()],D:s.daysShort[t.getDay()],S:h.getOrdinalSuffix(t.getDate()),m:String(t.getMonth()+1).padStart(2,"0"),n:t.getMonth()+1,F:s.months[t.getMonth()],M:s.monthsShort[t.getMonth()],Y:t.getFullYear(),y:String(t.getFullYear()).slice(-2),H:String(i).padStart(2,"0"),G:i,h:String(r).padStart(2,"0"),g:r,i:String(a).padStart(2,"0"),s:String(n).padStart(2,"0"),A:o?"PM":"AM",a:o?"pm":"am"};return e.replace(/d|j|l|D|S|m|n|F|M|Y|y|H|G|h|g|i|s|A|a/g,t=>l[t]||"")}static getOrdinalSuffix(t){if(3<t&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}updateInput(){let t="";if(this.options.multiple?0<this.selectedDates.length&&(t=this.options.altField?`${this.selectedDates.length} date${1!==this.selectedDates.length?"s":""} selected`:this.selectedDates.map(t=>this.formatDate(t)).join(this.options.multipleSeparator)):this.options.range&&this.selectedDate&&this.selectedEndDate?t=this.options.altField?this.formatDate(this.selectedDate)+" - "+this.formatDate(this.selectedEndDate):this.formatDate(this.selectedDate)+this.options.multipleSeparator+this.formatDate(this.selectedEndDate):this.selectedDate&&(t=this.formatDate(this.selectedDate)),this.input.value=t,this.options.altField){var s=document.getElementById(this.options.altField);if(s){let t="";this.options.multiple?t=this.selectedDates.map(t=>this.formatDate(t,this.options.altFormat)).join(this.options.altFieldMultipleSeparator):this.options.range&&this.selectedDate&&this.selectedEndDate?t=this.formatDate(this.selectedDate,this.options.altFormat)+this.options.altFieldMultipleSeparator+this.formatDate(this.selectedEndDate,this.options.altFormat):this.selectedDate&&(t=this.formatDate(this.selectedDate,this.options.altFormat)),s.value=t,s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new Event("input",{bubbles:!0}))}}if(this.options.timepicker&&this.selectedDate){let t=this.selectedDate.getHours(),e=this.selectedDate.getMinutes();if(this.selectedEndDate&&(t=this.selectedEndDate.getHours(),e=this.selectedEndDate.getMinutes()),this.options.ampm){let e=t<12;s=0===t?12:12<t?t-12:t;this.hoursInput&&(this.hoursInput.value=String(s).padStart(2,"0")),this.popup.querySelectorAll("[data-ampm]").forEach(t=>{t.classList.toggle("active",t.dataset.ampm===(e?"AM":"PM"))})}else this.hoursInput&&(this.hoursInput.value=String(t).padStart(2,"0"));this.minutesInput&&(this.minutesInput.value=String(e).padStart(2,"0"))}this.options.multiple&&this.updateMultipleDisplay(),this.options.altField||(this.input.dispatchEvent(new Event("change",{bubbles:!0})),this.input.dispatchEvent(new Event("input",{bubbles:!0})))}render(){this.options.timeOnly||(this.renderTitle(),"days"===this.view?this.renderDays():"months"===this.view?this.renderMonths():"years"===this.view&&this.renderYears())}renderTitle(){let t="";"days"===this.view?t=this.locale.months[this.focusedDate.getMonth()]+" "+this.focusedDate.getFullYear():"months"===this.view?t=this.focusedDate.getFullYear():"years"===this.view&&(t=this.currentYear+" - "+(this.currentYear+11)),this.title.textContent=t}renderDays(){this.grid.className="fdatepicker-grid";let e="";for(let t=0;t<7;t++){var s=(this.options.firstDayOfWeek+t)%7;e+=`<div class="fdatepicker-day-header">${this.locale.daysMin[s]}</div>`}this.grid.innerHTML=e;var i=new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1),a=new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth()+1,0),n=new Date,i=(i.getDay()-this.options.firstDayOfWeek+7)%7,o=new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth()-1,0);for(let t=i-1;0<=t;t--){var r=document.createElement("div");r.className="fdatepicker-day other-month",r.textContent=o.getDate()-t,r.setAttribute("tabindex","-1"),this.grid.appendChild(r)}for(let t=1;t<=a.getDate();t++){var l=document.createElement("div");l.className="fdatepicker-day",l.textContent=t,l.setAttribute("tabindex","-1");let e=new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),t);var d=(e.getDay()-this.options.firstDayOfWeek+7)%7;5!=d&&6!=d||l.classList.add("weekend"),e.toDateString()===n.toDateString()&&l.classList.add("today"),this.isDateDisabled(e)&&l.classList.add("disabled"),this.options.multiple?this.selectedDates.some(t=>t.toDateString()===e.toDateString())&&l.classList.add("multi-selected"):(this.selectedDate&&e.toDateString()===this.selectedDate.toDateString()&&l.classList.add(this.options.range?"range-start":"selected"),this.options.range&&this.selectedEndDate&&e.toDateString()===this.selectedEndDate.toDateString()&&l.classList.add("range-end"),this.options.range&&this.selectedDate&&this.selectedEndDate&&e>this.selectedDate&&e<this.selectedEndDate&&l.classList.add("in-range")),this.grid.appendChild(l)}var i=this.grid.children.length-7,h=(35<i?42:35)-i;for(let t=1;t<=h;t++){var u=document.createElement("div");u.className="fdatepicker-day other-month",u.textContent=t,u.setAttribute("tabindex","-1"),this.grid.appendChild(u)}}renderMonths(){this.grid.className="fdatepicker-grid months",this.grid.innerHTML="";for(let t=0;t<12;t++){var e=document.createElement("div");e.className="fdatepicker-month",e.textContent=this.locale.monthsShort[t],e.dataset.month=t,e.setAttribute("tabindex","-1"),t===(new Date).getMonth()&&this.focusedDate.getFullYear()===(new Date).getFullYear()&&e.classList.add("current"),this.selectedDate&&t===this.selectedDate.getMonth()&&this.focusedDate.getFullYear()===this.selectedDate.getFullYear()&&e.classList.add("selected"),this.grid.appendChild(e)}}renderYears(){this.grid.className="fdatepicker-grid years",this.grid.innerHTML="";for(let t=this.currentYear;t<this.currentYear+12;t++){var e=document.createElement("div");e.className="fdatepicker-year",e.textContent=t,e.dataset.year=t,e.setAttribute("tabindex","-1"),t===(new Date).getFullYear()&&e.classList.add("current"),this.selectedDate&&t===this.selectedDate.getFullYear()&&e.classList.add("selected"),this.grid.appendChild(e)}}update(t,e){"string"==typeof t?this.setOption(t,e):Object.entries(t).forEach(([t,e])=>{this.setOption(t,e)})}setOption(t,e){var s=this.options[t];if(s!==e){switch(this.options[t]=e,t){case"multiple":e?(this.selectedDates=this.selectedDate?[this.selectedDate]:[],this.selectedDate=null,this.selectedEndDate=null):(this.selectedDate=0<this.selectedDates.length?this.selectedDates[0]:null,this.selectedDates=[]);break;case"range":e&&this.options.multiple&&(this.options.multiple=!1,this.selectedDates=[])}this.updateInput(),this.updateMultipleDisplay(),this.render()}}}return h});